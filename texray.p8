pico-8 cartridge // http://www.pico-8.com
version 36
__lua__
function _init()
	cls(0)
	p={pos={x=64,y=60},speed={x=0,y=0},icon=2}
 b1={pos={x=64,y=-8},speed={x=0,y=-4}, sound=0, icon=9}
 b2={pos={x=64,y=-8},speed={x=0,y=-4}, sound=1, icon=14}
 f={icon=4}
	muzzle=0
end

function _update()
 p.speed.x=0
 p.speed.y=0
 p.icon=2
 
 --animate flame
 f.icon=4+f.icon%5

 --animateblue bullet
 b1.icon=9+b1.icon%5
 
 --animate tri bullet
 b2.icon=14+b1.icon%5
 
 --animate muzzle flash
 muzzle-=1
 
 --controls
 if (btn(0)) then
  p.speed.x=-1
  p.icon=1
 end
 
 if (btn(1)) then
  p.speed.x=1
  p.icon=3
 end
 
 if (btn(2)) then
  p.speed.y=-1
 end
 
 if (btn(3)) then
  p.speed.y=1
 end
 
 if (btnp(4)) then
  shoot(b2)
  muzzle=2
 end 
 
 if (btnp(5)) then
  shoot(b1)
  muzzle=4
 end 
 
 --collisions
 if (p.pos.x < -7) then
 	p.pos.x=127
 end
 
 if (p.pos.x > 127) then
 	p.pos.x=0
 end

 if (p.pos.y < -7) then
 	p.pos.y=127
 end
 
 if (p.pos.y > 127) then
 	p.pos.y=0
 end 
 
 --steps
 p.pos.x+=p.speed.x
 p.pos.y+=p.speed.y
 b1.pos.y+=b1.speed.y
 b2.pos.y+=b2.speed.y
end

function _draw()
 cls(0)
	
	spr(p.icon,p.pos.x,p.pos.y)
	spr(f.icon,p.pos.x,p.pos.y+8)

 spr(b1.icon,b1.pos.x,b1.pos.y)
 spr(b2.icon,b2.pos.x,b2.pos.y)
 
 circfill(p.pos.x+3,p.pos.y-2,muzzle,7)
end

function shoot(b)
 sfx(b.sound)
 b.pos.x=p.pos.x
 b.pos.y=p.pos.y-8
end
__gfx__
00000000000100000001100000001000000000000000000000000000000000000000000002dccd20002dd20000222200002dd20002dccd200007700000770000
0000000000091000001961000001900000099000000990000009900000099000000990000dc77cd002dccd2002dccd2002dccd200dc77cd00006600000660000
007007000099d10001d99d10001d9900028aa820000aa000000aa000000aa000028aa8200c7777c00dc77cd00dc77cd00dc77cd00c7777c00000000000000000
0007700001dd8210128dd8210128dd1000077000000770000007700000077000000770000c7777c00d7777d00dc77cd00d7777d00c7777c00007700000007700
0007700002ee8220228ee8220228ee2000000000000770000007700000077000000000000c7777c00dc77cd00dc77cd00dc77cd00c7777c00006600000006600
0070070002eed22022deed22022dee2000000000000000000006600000000000000000000dc77cd002dccd2002dccd2002dccd200dc77cd00000000000000000
000000000111d21012d11d21012d1110000000000000000000000000000000000000000002dccd20002dd20000222200002dd20002dccd200007700000770000
000000000010110001100110001101000000000000000000000000000000000000000000000dd000000000000000000000000000000dd0000006600000660000
00077000000077000007700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00066000000066000006600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000007700000007700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00066000006600000006600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000077000007700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00066000000066000006600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000de2002ed0000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000001e5225e10000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000d015510d0000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000110000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000d521125d0000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000001e5aa5e10000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000e005500e0000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000d002200d0000000000000000000000000000000000000000
__sfx__
00010000305502c55026550235501d550195501555012550105500f5500c5500a55009550085500755007550065500750008500045000b5000f500125001f5003050000000000000000000000000000000000000
000100001355013550135500000000000000001355013550135500000000000000000000013550135501355000000000000000000000000000000000000000000000000000000000000000000000000000000000
000100003a550345502f5502c55029550255502255021550205501f5501e5501c5501b5501a5501955019550185501855017550175501755017550195501b5101e5001f500275002750026500285002c50031500
